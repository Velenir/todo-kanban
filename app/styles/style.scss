html, body, body > div, .contents {
	height: 100%;
}

.contents {
	display: flex;
	flex-direction: column;

	&__header {
		flex: 0 0 auto;
	}
}

.board {
	flex: 1 0 auto;
	padding: 25px;

	&--column {
		display: flex;
		flex-direction: column;
		align-items: center;
		

		.afterwrapper {
			width: 525px;
		}
	}

	&--column-wrap {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
		flex-wrap: wrap;
		flex-basis: 0;
		overflow: auto;
		align-content: flex-start;
	}

	&--row {
		display: flex;
		flex-direction: row;
		overflow: auto;
		flex: 1 0 auto;
	}

	&--column-wrap, &--row {
		.afterwrapper {
			padding-right: 25px;
		}
	}
}

.todo-list li .custom-toggle {
	position: absolute;
	top: 0;
	bottom: 0;
	margin: auto 0;
	padding-left: 4px;
	width: 35px;
	height: 35px;
}

$shadowTransition: box-shadow .2s;
$buttonColor: #bf9a9a;
$shadow: 0 15px 9px -8px rgba(210, 199, 194, 0.55), 0 2px 2px rgba(156, 156, 156, 0.56);
$buttonShadow: $shadow, 0 0 2px rgba(156, 156, 156, 0.14);

.todoapp .titlespace {
	position: absolute;
	top: -2rem;
	$buttonWidth: 1.7rem;
	$buttonGap: 5px;

	width: calc(100% + #{$buttonWidth} + #{$buttonGap});

	h3 {
		margin: 0;
		font-size: 2em;
		font-weight: 100;
		text-align: center;
		color: #5e3838;
		text-rendering: optimizeLegibility;
		text-shadow: 1px 2px 3px grey;
		padding-bottom: 7px;
		box-shadow: $shadow;
		width: calc(100% - #{$buttonWidth} - #{$buttonGap});
		display: inline-block;

		&:empty::after {
			content: attr(data-placeholder);
			color: rgba(93, 99, 105, 0.44);
			text-shadow: none;
			cursor: text;
		}
	}

	button {
		color: $buttonColor;
		width: $buttonWidth;
		height: $buttonWidth * 0.94;
		font-size: 1.5em;
		box-shadow: $buttonShadow;
		margin-left: $buttonGap;
		vertical-align: bottom;
		border-radius: 15%;
		transition: $shadowTransition;

		&:active {
			box-shadow: $buttonShadow, inset 0 0 2px rgba(0, 0, 0, 0.44);
		}

		display: none;

		@at-root .appwrapper:hover .titlespace button {
			display: inline-block;
		}
	}
}

.addapp {
	$buttonShadow: 0 0 2px 2px rgba(160, 160, 160, 0.45);

	/* margin: 60px 0 40px; */
	margin-bottom: 25px;

	button {
		width: 3rem;
		height: 3rem;
		font-size: 2em;
		border-radius: 50%;
		background-color: white;
		color: $buttonColor;
		box-shadow: $buttonShadow;
		transition: $shadowTransition;

		&:active {
			box-shadow: $buttonShadow, inset 0 0 8px rgba(0, 0, 0, 0.44);
		}
	}
}

.todohandle {
	width: 1.3rem;
	height: 3rem;
	background-repeat: space;
	background-size: 0.5rem 0.6rem;
	cursor: grabbing;
	
	position: absolute;
	top: -2rem;
	right: calc(100% + 5px);
	background-color: #f5f5f5;
	opacity: .5;
	
	background-image: radial-gradient(circle 0.4rem, rgba(128, 128, 128, 0.54), rgba(128, 128, 128, 0.49) 50%, rgba(255, 255, 255, 0) 51%);
	box-shadow: $buttonShadow;
	
	padding: 7px;
	background-clip: content-box;
	border-top-left-radius: 1.4rem;

	&:active {
		opacity: .8;
		box-shadow: $buttonShadow, inset 0 0 2px rgba(0, 0, 0, 0.44);
	}

	display: none;

	.appwrapper:hover & {
		display: block;
	}
}

.appwrapper {
	max-width: 550px;
	min-width: 435px;
	padding: 45px;
}

.todoapp > *:last-child::before {
	content: '';
	position: absolute;
	right: 0;
	bottom: 0;
	left: 0;
	height: 50px;
	overflow: hidden;
	box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2), 0 8px 0 -3px #f6f6f6, 0 9px 1px -3px rgba(0, 0, 0, 0.2), 0 16px 0 -6px #f6f6f6, 0 17px 2px -6px rgba(0, 0, 0, 0.2);
	pointer-events: none;
}

.todo-list li .open-modal {
	display: none;
	position: absolute;
	top: 0;
	right: 46px;
	bottom: 0;
	width: 40px;
	height: 40px;
	margin: auto 0;
	padding-bottom: 3px;
	font-size: 28px;
	color: #cc9a9a;
	transition: color 0.2s ease-out;

	&:hover {
		color: #af5b5e;
	}
}

.todo-list li:hover .open-modal {
	display: block;
}

/* show :hover states on touch devices */
@media (any-hover: on-demand), (any-hover: none) {
	.todo-list li {
		.destroy, .open-modal {
			display: block;
		}
	}

	.appwrapper .todohandle {
		display: block;
	}

	.appwrapper .titlespace button {
		display: inline-block;
	}
}
